<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Page 3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>
    <h1>Homework 6 Page 3</h1>
    <div class="btn-group">
      <a href="index.html" class="btn btn-primary" style="background-color: #7B68EE">Home</a>
      <a href="page2.html" class="btn btn-primary" style="background-color: #7B68EE">Page 2</a>
      <a href="page3.html" class="btn btn-primary" style="background-color: #7B68EE">Page 3</a>
      <a href="page4.html" class="btn btn-primary" style="background-color: #7B68EE">Page 4</a>
    </div>
    <br><br>
    <div id="chart-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>

    <script type="module">
      const data = [
        { name: 'Category A', value: 30 },
        { name: 'Category B', value: 70 },
        { name: 'Category C', value: 50 },
        { name: 'Category D', value: 40 },
        { name: 'Category E', value: 60 }
      ];

      const width = 640;
      const height = Math.min(width, 500);
      const radius = Math.min(width, height) / 2;

      const arc = d3.arc()
          .innerRadius(radius * 0.67)
          .outerRadius(radius - 1);

      const pie = d3.pie()
          .padAngle(1 / radius)
          .sort(null)
          .value(d => d.value);

      const color = d3.scaleOrdinal()
          .domain(data.map(d => d.name))
          .range(d3.quantize(t => d3.interpolateSpectral(t * 0.8 + 0.1), data.length).reverse());

      const svg = d3.select("#chart-container")
          .append("svg")
          .attr("width", width)
          .attr("height", height)
          .attr("viewBox", [-width / 2, -height / 2, width, height])
          .attr("style", "max-width: 100%; height: auto;");

      svg.append("g")
        .selectAll("path")
        .data(pie(data))
        .join("path")
          .attr("fill", d => color(d.data.name))
          .attr("d", arc)
        .append("title")
          .text(d => `${d.data.name}: ${d.data.value.toLocaleString()}`);

      svg.append("g")
          .attr("font-family", "sans-serif")
          .attr("font-size", 12)
          .attr("text-anchor", "middle")
        .selectAll("text")
        .data(pie(data))
        .join("text")
          .attr("transform", d => `translate(${arc.centroid(d)})`)
          .call(text => text.append("tspan")
              .attr("y", "-0.4em")
              .attr("font-weight", "bold")
              .text(d => d.data.name))
          .call(text => text.filter(d => (d.endAngle - d.startAngle) > 0.25).append("tspan")
              .attr("x", 0)
              .attr("y", "0.7em")
              .attr("fill-opacity", 0.7)
              .text(d => d.data.value.toLocaleString("en-US")));
    </script>
  </body>
</html>
